<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Nothing Reminder</title>
<link rel="icon" type="image/png" href="assets/icon.png">
<style>
:root {
  --bg: #ffffff;
  --text: #000000;
  --muted: #666;
  --accent: #4CAF50;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
}
.sidebar {
  width: 220px;
  background: #666;
  color: #fff;
  position: fixed;
  height: 100%;
  left: 0;
  display: flex;
  flex-direction: column;
  padding: 12px;
  gap: 8px;
  transition: left 0.25s;
}
.profile {
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:4px;
}
.menu-btn, .icon-btn, .add-btn {
  display:block;
  width:100%;
  padding:10px;
  border: none;
  background:#888;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
  text-align:left;
  font-size:15px;
  transition: left 0.25s;
}
.menu-btn:hover, .icon-btn:hover, .add-btn:hover { background:#aaa; }
.main {
  margin-left: 220px;
  padding: 20px;
  min-height: 100vh;
  transition: left 0.25s;
}
.page.hidden { display:none; }
.toggle-btn {
  position: absolute;
  left: 230px;
  top: 12px;
  padding:6px 8px;
  border-radius:6px;
  border:none;
  background:#ddd;
  cursor:pointer;
  transition: left 0.25s;
}
.list { list-style:none; padding:0; margin:0 0 12px 0; }
.list li {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px;
  border-radius:6px;
  margin-bottom:8px;
  background: rgba(0,0,0,0.03);
  transition: left 0.25s;
}
.item-left { display:flex; flex-direction:column; gap:4px; }
.badge { background:#eee; padding:4px 8px; border-radius:12px; font-size:12px; }
.form {
  margin-top: 0;
  padding: 12px;
  border-radius: 8px;
  background: #f5f5f5;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 520px;
  overflow: hidden;
  transition: max-height 0.3s ease, padding 0.3s ease;
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
  transition: left 0.25s;
}
.form.visible {
  max-height: 500px;
  padding-top: 12px;
  padding-bottom: 12px;
}
.form label {
  display:flex;
  flex-direction:column;
  font-size:13px;
  gap:6px;
  transition: left 0.25s;
}
.form input[type="text"], .form input[type="date"], .form textarea {
  padding:8px;
  border-radius:6px;
  border:1px solid #ccc;
  transition: left 0.25s;
}
.form-actions {
  display:flex;
  gap:8px;
  margin-top:6px;
  transition: left 0.25s;
}
.primary {
  background: var(--accent);
  color: #fff;
  border:none;
  padding:8px 12px;
  border-radius:6px;
  cursor:pointer;
}
.secondary {
  background:#ddd;
  border:none;
  padding:8px 12px;
  border-radius:6px;
  cursor:pointer;
}
.icon-small {
  background:transparent;
  border:none;
  cursor:pointer;
  margin-left:8px;
  font-size:16px;
}
.add-area {
  margin-top: 8px;
  max-width: 520px;
}
.dark {
  --bg: #121212;
  --text: #f1f1f1;
}
.dark .main { background:#151515; color:var(--text); }
.dark .form { background: #232323; }
.dark .menu-btn, .dark .icon-btn { background:#333; color:var(--text); }
#showAddFormBtn, #homeRemindersToggle, #showAddNoteBtn, #viewNotesToggle, #homeNotesToggle {
  position: relative;
  user-select: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: left 0.25s;
}
#showAddFormBtn.open .arrow, #homeRemindersToggle.open .arrow, #showAddNoteBtn.open .arrow, #viewNotesToggle.open .arrow, #homeNotesToggle.open .arrow {
  transform: rotate(180deg);
  transition: left 0.25s;
}
</style>
</head>
<body>
<div id="sidebar" class="sidebar">
  <div class="profile">
    <img id="profilePhoto" src="https://via.placeholder.com/40" alt="Profile" width="40" height="40" style="border-radius:50%;object-fit:cover;cursor:pointer;" onclick="document.getElementById('photoUpload').click()"/>
    <h3 id="profileName">üë§ User</h3>
  </div>
  <input id="photoUpload" type="file" accept="image/*" style="display:none;" />
  <button class="menu-btn" id="editNameBtn">‚úèÔ∏è Edit Name</button>
  <button class="menu-btn" data-page="home">üè† Home</button>
  <button class="menu-btn" data-page="reminders">‚è∞ Reminders</button>
  <button class="menu-btn" data-page="notes">üìù Notes</button>
  <button class="menu-btn" data-page="terms">üìÑ Terms of Use</button>
  <button class="menu-btn" data-page="how">üìÑ How to Use</button>
  <button id="darkModeBtn" class="icon-btn" style="margin-top:auto;">üåô Dark Mode</button>
</div>

<div id="main" class="main">
  <button id="toggleBtn" class="toggle-btn">‚Æú</button>

  <!-- Home -->
  <div id="home" class="page">
    <h2>Home</h2>
    <div class="add-area">
      <button id="homeRemindersToggle" class="add-btn" aria-expanded="false">
        ‚ö†Ô∏è Reminders <span class="arrow">‚ñº</span>
      </button>
      <div id="homeRemindersContainer" class="form" aria-hidden="true"></div>
    </div>
    <div class="add-area">
      <button id="homeNotesToggle" class="add-btn" aria-expanded="false">
        üìù Notes <span class="arrow">‚ñº</span>
      </button>
      <div id="homeNotesContainer" class="form" aria-hidden="true"></div>
    </div>
  </div>

  <!-- Reminders -->
  <div id="reminders" class="page hidden">
    <h2>Reminders</h2>
    <div class="add-area">
      <button id="showAddFormBtn" class="add-btn" aria-expanded="false">
        Ôºã Add New Reminder <span class="arrow">‚ñº</span>
      </button>
      <div id="reminderFormContainer" class="form" aria-hidden="true">
        <label>Title<input id="reminderTitle" type="text" placeholder="Title" /></label>
        <label>Start date<input id="startDate" type="date" /></label>
        <label>End date<input id="endDate" type="date" /></label>
        <div class="form-actions">
          <button id="saveReminderBtn" class="primary">Save</button>
          <button id="cancelReminderBtn" class="secondary">Cancel</button>
        </div>
      </div>
    </div>
    <ul id="reminderList" class="list"></ul>
  </div>

  <!-- Notes -->
  <div id="notes" class="page hidden">
    <h2>üìù Notes</h2>
    <div class="add-area">
      <button id="showAddNoteBtn" class="add-btn" aria-expanded="false">
        Ôºã Add New Note <span class="arrow">‚ñº</span>
      </button>
      <div id="noteFormContainer" class="form" aria-hidden="true">
        <label>Note<textarea id="noteText" rows="4" placeholder="Write your note here..."></textarea></label>
        <div class="form-actions">
          <button id="saveNoteBtn" class="primary">Save</button>
          <button id="cancelNoteBtn" class="secondary">Cancel</button>
        </div>
      </div>
    </div>
    <div class="add-area">
      <button id="viewNotesToggle" class="add-btn" aria-expanded="false">
        üëÄ View Notes <span class="arrow">‚ñº</span>
      </button>
      <ul id="noteList" class="list form" aria-hidden="true"></ul>
    </div>
  </div>

  <!-- Terms of Use Page -->
  <div id="terms" class="page hidden">
    <h1>Privacy Policy!</h1>
    <ul>
      <li> App data are stored using local storage. Avoid data losses before formatting the device.</li>
      <li> Data's fetched delay may happen based on your browser performance.</li>
      <li>If you'd like to contribute, check out here: <a href="https://github.com/Spydernet3" target="_blank">Spydernet Github ‚Ü†</a></li>
    </ul>
    <hr>
    <h3>Version Info!</h3>
    <p>Version 8.2</p>
    <p>Last Updated: 30-Aug-2025</p>
    <p>Project: Open source project</p>
  </div>

  <!-- How to Use Page -->
  <div id="how" class="page hidden">
    <h3>Reminder!</h3>
    <hr>
    <ul>
      <li>Go to the Reminders page</li>
      <li> Click + Add New Reminder</li>
      <li> Fill Title, Start Date, End Date</li>
      <li> Click Save</li>
      <li> Edit or delete using the ‚úèÔ∏è and üóëÔ∏è button.</li>
      <li>Urgent reminders appear on the Home page automatically.</li>
    </ul>

    <h3>Notes!</h3>
    <hr>
    <ul>
      <li>Go to the Notes page.</li>
      <li>Click + Add New Note.</li>
      <li>Write your note in the textarea.</li>
      <li>Click Save. IST date & time is added automatically.</li>
      <li>View notes in the collapsible View Notes section.</li>
      <li>Delete notes with üóëÔ∏è button.</li>
    </ul>

    <h3>Profile!</h3>
    <hr>
    <ul>
      <li>Click the profile picture to upload a new image.</li>
      <li>Click Edit Name to update the username.</li>
    </ul>
    <h3>Dark Mode!</h3>
    <hr>
    <ul>
      <li>Click the üåô button in the sidebar to toggle dark mode.</li>
      <li>Dark mode preference is saved.</li>
    </ul>
    <h3>Remember!</h3>
    <hr>
    <ul>
      <li>Data may fetch slowly based on your browser performance</li>
    </ul>
  </div>
</div>
<script>
(function () {
  // ---------- Storage ----------
  const STORAGE_KEY = 'smart_reminder_app_v1';
  let appData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
    reminders: [],
    notes: [],
    profileName: '',
    profilePhoto: '',
    darkMode: '0'
  };

  let editingIndex = null;

  // ---------- Helpers ----------
  function byId(id){ return document.getElementById(id); }
  function saveAll(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(appData)); }

  // ‚úÖ Fixed daysLeft function
  function daysLeft(endDateStr){
  if(!endDateStr) return null;
  const [y,m,d] = endDateStr.split('-').map(Number);
  const end = new Date(y,m-1,d);  // 00:00 of end date
  const now = new Date();
  const diffTime = end.setHours(0,0,0,0) - now.setHours(0,0,0,0); // remove hours/minutes
  return Math.floor(diffTime / (1000*60*60*24));
}


  function formatDMY(dateStr){ 
    if(!dateStr) return ''; 
    const [y,m,d] = dateStr.split('-'); 
    return `${d.padStart(2,'0')}/${m.padStart(2,'0')}/${y}`; 
  }

  // ---------- Render Functions ----------
  function renderReminders(){
    const list = byId('reminderList'); list.innerHTML = '';
    if(appData.reminders.length === 0){
      const li = document.createElement('li'); li.textContent='No reminders yet.'; li.style.opacity='0.7'; list.appendChild(li);
      renderHomeReminders(); renderHomeNotes(); return;
    }
    const frag = document.createDocumentFragment();
    appData.reminders.forEach((r,i)=>{
      const li=document.createElement('li');
      const left=document.createElement('div'); left.className='item-left';
      const title=document.createElement('div'); title.textContent=r.title; title.style.fontWeight='600';
      const dates=document.createElement('div'); dates.style.fontSize='13px'; dates.style.opacity='0.85'; dates.textContent=`Start: ${formatDMY(r.startDate)} | End: ${formatDMY(r.endDate)}`;
      left.appendChild(title); left.appendChild(dates);

      const right=document.createElement('div'); right.style.display='flex'; right.style.alignItems='center';
      const badge=document.createElement('div'); badge.className='badge';
      // ‚úÖ Updated badge logic
      const diff = daysLeft(r.endDate);
      if(diff === null){ badge.textContent='No date'; }
      else if(diff < 0){ badge.textContent='Expired'; }
      else if(diff === 0){ badge.textContent='Today'; }
      else{ badge.textContent=`${diff} days left`; }

      const editBtn=document.createElement('button'); editBtn.className='icon-small'; editBtn.textContent='‚úèÔ∏è'; editBtn.title='Edit'; editBtn.addEventListener('click',()=>editReminder(i));
      const delBtn=document.createElement('button'); delBtn.className='icon-small'; delBtn.textContent='üóëÔ∏è'; delBtn.title='Delete'; delBtn.addEventListener('click',()=>deleteReminder(i));
      right.appendChild(badge); right.appendChild(editBtn); right.appendChild(delBtn);

      li.appendChild(left); li.appendChild(right); frag.appendChild(li);
    });
    list.appendChild(frag);
    renderHomeReminders(); renderHomeNotes();
  }

  function renderHomeReminders(){
  const container = byId('homeRemindersContainer'); 
  container.innerHTML='';
  if(appData.reminders.length === 0){
    const li=document.createElement('li'); 
    li.textContent='No reminders yet.'; 
    li.style.opacity='0.7'; 
    container.appendChild(li); 
    return; 
  }
  const frag=document.createDocumentFragment();
  appData.reminders.forEach(r=>{
    const li=document.createElement('li'); 
    li.className='list-item'; 

    // Single line format with title + end date + badge
    const diff = daysLeft(r.endDate);
    let badgeText='';
    if(diff === null){ badgeText='No date'; }
    else if(diff < 0){ badgeText='Expired'; }
    else if(diff === 0){ badgeText='Today'; }
    else{ badgeText=`${diff} days left`; }

    li.textContent = `${r.title} ||  ${badgeText}`;
    frag.appendChild(li);
  });
  container.appendChild(frag);
}


  // ---------- Keep all other functions exactly the same as your original JS ----------
  function renderHomeNotes(){ const container = byId('homeNotesContainer'); container.innerHTML=''; if(appData.notes.length===0){ const li=document.createElement('li'); li.textContent='No notes available.'; li.style.opacity='0.7'; container.appendChild(li); return; } const frag=document.createDocumentFragment(); appData.notes.forEach(n=>{ const li=document.createElement('li'); li.className='list-item'; const left=document.createElement('div'); left.className='item-left'; const text=document.createElement('div'); text.innerHTML=`<b>${n.text}</b><br><small style="opacity:0.7">${n.createdAt||''}</small>`; left.appendChild(text); li.appendChild(left); frag.appendChild(li); }); container.appendChild(frag); }

  function renderNotes(){ const list=byId('noteList'); list.innerHTML=''; if(appData.notes.length===0){ const li=document.createElement('li'); li.textContent='No notes yet.'; li.style.opacity='0.7'; list.appendChild(li); return; } const frag=document.createDocumentFragment(); appData.notes.forEach((note,i)=>{ const li=document.createElement('li'); const left=document.createElement('div'); left.className='item-left'; const text=document.createElement('div'); text.innerHTML=`<b>${note.text}</b><br><small style="opacity:0.7">${note.createdAt||''}</small>`; left.appendChild(text); const right=document.createElement('div'); right.style.display='flex'; right.style.alignItems='center'; const delBtn=document.createElement('button'); delBtn.className='icon-small'; delBtn.textContent='üóëÔ∏è'; delBtn.title='Delete'; delBtn.addEventListener('click',()=>{ appData.notes.splice(i,1); saveAll(); renderNotes(); renderHomeNotes(); }); right.appendChild(delBtn); li.appendChild(left); li.appendChild(right); frag.appendChild(li); }); list.appendChild(frag); }

  function editReminder(i){ const r=appData.reminders[i]; editingIndex=i; showForm(); byId('reminderTitle').value=r.title; byId('startDate').value=r.startDate||''; byId('endDate').value=r.endDate||''; openForm(); }
  function deleteReminder(i){ if(!confirm('Are you sure?')) return; appData.reminders.splice(i,1); saveAll(); renderReminders(); }
  function showForm(){ openForm(); }
  function clearForm(){ byId('reminderTitle').value=''; byId('startDate').value=''; byId('endDate').value=''; editingIndex=null; }
  function openForm(){ const f=byId('reminderFormContainer'); const b=byId('showAddFormBtn'); f.classList.add('visible'); b.classList.add('open'); b.setAttribute('aria-expanded','true'); f.setAttribute('aria-hidden','false'); }
  function closeForm(){ const f=byId('reminderFormContainer'); const b=byId('showAddFormBtn'); f.classList.remove('visible'); b.classList.remove('open'); b.setAttribute('aria-expanded','false'); f.setAttribute('aria-hidden','true'); }
  function toggleForm(){ const f=byId('reminderFormContainer'); if(f.classList.contains('visible')){ closeForm(); clearForm(); } else { openForm(); } }
  function saveReminder(){ const title=byId('reminderTitle').value.trim(); const startDate=byId('startDate').value; const endDate=byId('endDate').value; if(!title){ alert('Please enter a title.'); return; } if(startDate&&endDate&&startDate>endDate){ alert('Start date cannot be after End date.'); return; } const reminder={title,startDate,endDate}; if(editingIndex!==null){ appData.reminders[editingIndex]=reminder; } else { appData.reminders.push(reminder); } saveAll(); renderReminders(); closeForm(); clearForm(); }

  // ---------- Event Listeners ----------
  byId('showAddFormBtn').addEventListener('click',toggleForm);
  byId('saveReminderBtn').addEventListener('click',saveReminder);
  byId('cancelReminderBtn').addEventListener('click',()=>{ closeForm(); clearForm(); });
  byId('homeRemindersToggle').addEventListener('click',()=>{ const c=byId('homeRemindersContainer'); c.classList.toggle('visible'); byId('homeRemindersToggle').classList.toggle('open'); const expanded=c.classList.contains('visible'); byId('homeRemindersToggle').setAttribute('aria-expanded',expanded); });
  byId('homeNotesToggle').addEventListener('click',()=>{ const c=byId('homeNotesContainer'); c.classList.toggle('visible'); byId('homeNotesToggle').classList.toggle('open'); const expanded=c.classList.contains('visible'); byId('homeNotesToggle').setAttribute('aria-expanded',expanded); });
  byId('showAddNoteBtn').addEventListener('click',()=>{ const f=byId('noteFormContainer'); f.classList.toggle('visible'); byId('showAddNoteBtn').classList.toggle('open'); const expanded=f.classList.contains('visible'); byId('showAddNoteBtn').setAttribute('aria-expanded',expanded); });
  byId('cancelNoteBtn').addEventListener('click',()=>{ const f=byId('noteFormContainer'); f.classList.remove('visible'); byId('showAddNoteBtn').classList.remove('open'); byId('showAddNoteBtn').setAttribute('aria-expanded','false'); });
  byId('saveNoteBtn').addEventListener('click',()=>{ const text = byId('noteText').value.trim(); if(!text){ alert('Please enter a note.'); return; } const now = new Date(); const istOffsetMs = 5.5 * 60 * 60 * 1000; const ist = new Date(now.getTime() + istOffsetMs + (now.getTimezoneOffset() * 60 * 1000)); const istStr = ist.toLocaleString('en-IN', { day:'2-digit', month:'2-digit', year:'numeric', hour:'2-digit', minute:'2-digit', hour12:true }); appData.notes.push({ text, createdAt: istStr }); saveAll(); renderNotes(); renderHomeNotes(); byId('noteText').value=''; const f=byId('noteFormContainer'); f.classList.remove('visible'); byId('showAddNoteBtn').classList.remove('open'); byId('showAddNoteBtn').setAttribute('aria-expanded','false'); });
  byId('viewNotesToggle').addEventListener('click',()=>{ const f=byId('noteList'); f.classList.toggle('visible'); byId('viewNotesToggle').classList.toggle('open'); const expanded=f.classList.contains('visible'); byId('viewNotesToggle').setAttribute('aria-expanded',expanded); });

  const sidebar = byId('sidebar'); const main = byId('main');
  byId('toggleBtn').addEventListener('click',()=>{ if(sidebar.style.display==='none'){ sidebar.style.display='flex'; main.style.marginLeft='220px'; byId('toggleBtn').textContent='‚Æú'; } else { sidebar.style.display='none'; main.style.marginLeft='0'; byId('toggleBtn').textContent='‚Æû'; } });

  document.querySelectorAll('.menu-btn[data-page]').forEach(btn=>{ btn.addEventListener('click',()=>{ const page = btn.getAttribute('data-page'); document.querySelectorAll('.page').forEach(p=>p.classList.toggle('hidden', p.id !== page)); if(page==='home'){ renderReminders(); renderHomeNotes(); } else if(page==='reminders'){ renderReminders(); } else if(page==='notes'){ renderNotes(); } closeForm(); if(sidebar.style.display!=='none'){ sidebar.style.display='none'; main.style.marginLeft='0'; byId('toggleBtn').textContent='‚Æû'; } }); });

  byId('editNameBtn').addEventListener('click',()=>{ const newName=prompt('Enter new name:',byId('profileName').textContent); if(newName!==null){ byId('profileName').textContent=newName; appData.profileName=newName; saveAll(); } });

  byId('photoUpload').addEventListener('change',function(){ const file=this.files[0]; if(!file) return; const reader=new FileReader(); reader.onload=()=>{ byId('profilePhoto').src=reader.result; appData.profilePhoto=reader.result; saveAll(); }; reader.readAsDataURL(file); });

  byId('darkModeBtn').addEventListener('click',()=>{ document.body.classList.toggle('dark'); appData.darkMode=document.body.classList.contains('dark')?'1':'0'; saveAll(); });

  // ---------- Initial Load ----------
  window.addEventListener('load',()=>{ if(appData.profileName) byId('profileName').textContent=appData.profileName; if(appData.profilePhoto) byId('profilePhoto').src=appData.profilePhoto; if(appData.darkMode==='1') document.body.classList.add('dark'); renderReminders(); renderNotes(); renderHomeReminders(); renderHomeNotes(); });

})();
</script>
</body>
</html>
